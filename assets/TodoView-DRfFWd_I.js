import{r as i,b as T,c as m,o as v,a as s,d as y,w as a,v as d,t as p}from"./index-CPEcK_0r.js";import{a as k}from"./index-ngrFHoWO.js";const V={class:"middleToDo"},$={class:"box"},I={class:"box"},U={class:"user"},f={class:"box"},D={key:0},B={key:1},r="https://todolist-api.hexschool.io/",F={__name:"TodoView",setup(E){const t=i({email:"",password:"",nickname:""}),g=i(""),w=async()=>{console.log(`${r}users/sign_up`);try{const o=await k.post(`${r}users/sign_up`,t.value);console.log(o),g.value=o.data.uid}catch(o){console.log("註冊錯誤!!"),console.log(o)}},e=i({email:"",password:""}),b=i(""),x=async()=>{console.log(`${r}users/sign_In`);try{const o=await k.post(`${r}users/sign_In`,e.value);console.log(o),b.value=o.data.token,document.cookie=`customTodoToken = ${o.data.token};path=/`}catch(o){console.log("登入錯誤!!"),console.log(o)}},u=i({nickname:"",uid:""});return T(async()=>{const o=document.cookie.replace(/(?:^|.*;\s*)customTodoToken\s*=\s*([^;]*).*$/i,"$1"),l=await k.get(`${r}users/checkout`,{headers:{Authorization:o}});console.log(l),u.value=l.data}),(o,l)=>(v(),m("div",V,[l[17]||(l[17]=s("h2",{class:"keyWord"},"註冊功能",-1)),s("div",$,[l[5]||(l[5]=s("span",null,"註冊郵箱：",-1)),a(s("input",{class:"input",type:"email",placeholder:"輸入Email","onUpdate:modelValue":l[0]||(l[0]=n=>t.value.email=n)},null,512),[[d,t.value.email]]),l[6]||(l[6]=s("br",null,null,-1)),l[7]||(l[7]=s("span",null,"註冊密碼：",-1)),a(s("input",{class:"input",type:"text",placeholder:"輸入密碼","onUpdate:modelValue":l[1]||(l[1]=n=>t.value.password=n)},null,512),[[d,t.value.password]]),l[8]||(l[8]=s("br",null,null,-1)),l[9]||(l[9]=s("span",null,"您的暱稱：",-1)),a(s("input",{class:"input",type:"text",placeholder:"輸入暱稱","onUpdate:modelValue":l[2]||(l[2]=n=>t.value.nickname=n)},null,512),[[d,t.value.nickname]]),l[10]||(l[10]=s("br",null,null,-1))]),s("button",{type:"button",onClick:w,class:"btn"},"註冊"),y(" UID號："+p(g.value)+" ",1),l[18]||(l[18]=s("br",null,null,-1)),l[19]||(l[19]=s("br",null,null,-1)),s("div",I,[l[11]||(l[11]=s("h2",{class:"keyWord"},"登入功能",-1)),l[12]||(l[12]=s("span",null,"登入郵箱：",-1)),a(s("input",{class:"input",type:"email",placeholder:"輸入Email","onUpdate:modelValue":l[3]||(l[3]=n=>e.value.email=n)},null,512),[[d,e.value.email]]),l[13]||(l[13]=s("br",null,null,-1)),l[14]||(l[14]=s("span",null,"登入密碼：",-1)),a(s("input",{class:"input",type:"text",placeholder:"輸入密碼","onUpdate:modelValue":l[4]||(l[4]=n=>e.value.password=n)},null,512),[[d,e.value.password]])]),s("button",{type:"button",onClick:x,class:"btn"},"登入"),y(" token號："+p(b.value)+" ",1),l[20]||(l[20]=s("br",null,null,-1)),l[21]||(l[21]=s("br",null,null,-1)),l[22]||(l[22]=s("h2",{class:"keyWord"},"驗證功能",-1)),s("div",U,p(u.value),1),s("div",f,[u.value.uid?(v(),m("div",D,[l[15]||(l[15]=s("p",null,"最後狀態:",-1)),s("p",null,"您的UID號 : "+p(u.value.uid),1),s("p",null,"您的暱稱為："+p(u.value.nickname),1)])):(v(),m("div",B,[...l[16]||(l[16]=[s("p",null,"注意!! 你還沒有成功登入",-1)])]))])]))}};export{F as default};
