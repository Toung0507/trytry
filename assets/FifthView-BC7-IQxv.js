import{r as a,b as C,c as d,o as p,a as s,w as i,d as g,v as r,t as m,F as y}from"./index-lELRv6x7.js";import f from"https://esm.sh/axios";const h={id:"signUpPage",class:"bg-yellow"},x={class:"conatiner signUpPage vhContainer"},P={class:"formControls",action:"index.html"},I={id:"loginPage",class:"bg-yellow"},U={class:"conatiner loginPage vhContainer"},L={class:"formControls",action:"index.html"},V={id:"verifyPage",class:"bg-yellow"},T={class:"conatiner verifyPage vhContainer"},$={key:0},F={key:1},c="https://todolist-api.hexschool.io/",E={__name:"FifthView",setup(q){const n=a({email:"",password:"",nickname:""}),b=a(""),w=async()=>{try{const l=await f.post(`${c}users/sign_up`,n.value);console.log(l),b.value=l.data.uid}catch(l){console.log("註冊錯誤!"),console.log(l)}},e=a({email:"",password:""}),v=a(""),k=async()=>{try{const l=await f.post(`${c}users/sign_in`,e.value);console.log(l),v.value=l.data.token,document.cookie=`customTodoToken=${l.data.token};path=/`}catch(l){console.log("登入錯誤!"),console.log(l)}},u=a({nickname:"",uid:""});return C(async()=>{const l=document.cookie.replace(/(?:^|.*;\s*)customTodoToken\s*=\s*([^;]*).*$/i,"$1"),o=await f.get(`${c}users/checkout`,{headers:{Authorization:l}});console.log(o),u.value=o.data}),(l,o)=>(p(),d(y,null,[s("div",h,[s("div",x,[o[12]||(o[12]=s("div",{class:"side"},[s("a",{href:"#"},[s("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),s("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),s("div",null,[s("form",P,[o[5]||(o[5]=s("h2",{class:"formControls_txt"},"註冊帳號",-1)),o[6]||(o[6]=s("label",{class:"formControls_label",for:"email"},"Email",-1)),i(s("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":o[0]||(o[0]=t=>n.value.email=t)},null,512),[[r,n.value.email]]),o[7]||(o[7]=s("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),i(s("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":o[1]||(o[1]=t=>n.value.password=t)},null,512),[[r,n.value.password]]),o[8]||(o[8]=s("label",{class:"formControls_label",for:"name"},"您的暱稱",-1)),i(s("input",{class:"formControls_input",type:"text",name:"name",id:"name",placeholder:"請輸入您的暱稱","onUpdate:modelValue":o[2]||(o[2]=t=>n.value.nickname=t)},null,512),[[r,n.value.nickname]]),s("input",{class:"formControls_btnSubmit",type:"button",onclick:"javascript:location.href='#todoListPage'",value:"註冊帳號",onClick:w}),o[9]||(o[9]=s("br",null,null,-1)),g(" "+m(n.value)+" ",1),o[10]||(o[10]=s("a",{class:"formControls_btnLink",href:"#loginPage"},"登入",-1)),o[11]||(o[11]=s("a",{class:"formControls_btnLink",href:"#verifyPage"},"驗證登入狀態",-1))])])])]),s("div",I,[s("div",U,[o[21]||(o[21]=s("div",{class:"side"},[s("a",{href:"#"},[s("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),s("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),s("div",null,[s("form",L,[o[13]||(o[13]=s("h2",{class:"formControls_txt"},"登入功能",-1)),o[14]||(o[14]=s("label",{class:"formControls_label",for:"email"},"Email",-1)),i(s("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":o[3]||(o[3]=t=>e.value.email=t)},null,512),[[r,e.value.email]]),o[15]||(o[15]=s("span",null,"此欄位不可留空",-1)),o[16]||(o[16]=s("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),i(s("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":o[4]||(o[4]=t=>e.value.password=t)},null,512),[[r,e.value.password]]),s("input",{class:"formControls_btnSubmit",type:"button",onclick:"javascript:location.href='#todoListPage'",value:"登入",onClick:k}),o[17]||(o[17]=s("br",null,null,-1)),g(" "+m(e.value)+" ",1),o[18]||(o[18]=s("br",null,null,-1)),g(" token:"+m(v.value)+" ",1),o[19]||(o[19]=s("a",{class:"formControls_btnLink",href:"#signUpPage"},"註冊帳號",-1)),o[20]||(o[20]=s("a",{class:"formControls_btnLink",href:"#verifyPage"},"驗證登入狀態",-1))])])])]),s("div",V,[s("div",T,[o[24]||(o[24]=s("div",{class:"side"},[s("a",{href:"#"},[s("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),s("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),u.value.uid?(p(),d("div",$,[o[22]||(o[22]=s("h2",{class:"formControls_txt"},"驗證登入狀態",-1)),s("p",null,"UID:"+m(u.value.uid),1),s("p",null,"nickname:"+m(u.value.nickname),1)])):(p(),d("div",F,[...o[23]||(o[23]=[s("h2",{class:"formControls_txt"},"驗證登入狀態",-1),s("p",null,"你還沒有登入",-1),s("form",{class:"formControls",action:"index.html"},[s("a",{class:"formControls_btnLink",href:"#loginPage"},"登入"),s("a",{class:"formControls_btnLink",href:"#signUpPage"},"註冊帳號")],-1)])]))])])],64))}};export{E as default};
